{"version":3,"sources":["pages/other/Checkout.js"],"names":["connect","state","cartItems","cartData","currency","currencyData","dispatch","removeAllFromCart","decrementProduct","newStock","user","location","isLogin","SetUserLogin","pathname","addToast","useToasts","cartTotalPrice","useState","name","setName","deliverOption","setDeliverOption","address","setAddress","number","phone","setPhone","email","setEmail","note","setNote","history","useHistory","content","to","process","headerTop","className","length","type","onChange","e","target","value","placeholder","map","cartItem","key","discountedPrice","finalProductPrice","price","currencyRate","toFixed","finalDiscountedPrice","quantity","productName","currencySymbol","onClick","emailPattern","RegExp","emailPattern2","emailPattern3","valid","validityof","trim","test","i","appearance","autoDismiss","isValid","orderData","userID","products","status","axios","post","then","res","console","log","_id","stock","push"],"mappings":"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","file":"static/js/18.ea2d926b.chunk.js","sourcesContent":["import PropTypes from \"prop-types\";\nimport React, { Fragment,useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport MetaTags from \"react-meta-tags\";\nimport { connect } from \"react-redux\";\nimport { BreadcrumbsItem } from \"react-breadcrumbs-dynamic\";\nimport { getDiscountPrice } from \"../../helpers/product\";\nimport LayoutOne from \"../../layouts/LayoutOne\";\nimport Breadcrumb from \"../../wrappers/breadcrumb/Breadcrumb\";\nimport { useToasts } from \"react-toast-notifications\";\nimport axios from 'axios';\nimport { useHistory } from \"react-router-dom\";\nimport { removeAllFromCart} from \"../../redux/actions/cartActions\";\nimport { decrementProduct} from \"../../redux/actions/productActions\";\n// const URL = \"https://infinite-sands-08332.herokuapp.com/\";\nconst URL = \"http://localhost:9000/\";\nconst Checkout = ({user, location, cartItems, currency,isLogin,SetUserLogin,removeAllFromCart ,decrementProduct}) => {\n  const { pathname } = location;\n \n  let {addToast} = useToasts();\n  let cartTotalPrice = 0;\n  const [name, setName] = useState(user.name?user.name:\"\");\n  const [deliverOption, setDeliverOption] = useState(\"Pickup\");\n  const [address, setAddress] = useState(user.address?user.address:\"\");\n  const [phone, setPhone] = useState(user.number?user.number:\"\");\n  const [email, setEmail] = useState(user.email?user.email:\"\");\n  const [note, setNote] = useState(\"\");\n  const history = useHistory();\n  const isValid = () => {\n    let emailPattern = new RegExp(/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\\.[A-Za-z]+$/);\n    let emailPattern2 = new RegExp(/^[a-zA-Z0-9]+@[a-zA-Z0-9]+\\.[A-Za-z]+\\.[A-Za-z]+$/);\n    let emailPattern3 = new RegExp(/^[a-zA-Z0-9]+\\.+[a-zA-Z0-9]+@[a-zA-Z0-9]+\\.[A-Za-z]+$/);\n    let valid = [0, 1, 0, 0, 0, 1];\n    let validityof=[\"Name\",\"deliveryOption\",\"Address\",\"Phone Number\",\"Email\",\"Note\"]\n    if (name.trim().length > 0) valid[0] = 1;\n    if (deliverOption!==\"Pickup\"&&address.trim().length>0) valid[2] = 1;\n    if (deliverOption===\"Pickup\") valid[2] = 1;\n    if ((phone+\"\").length === 10) valid[3] = 1;\n    if ((emailPattern.test(email) || emailPattern2.test(email)|| emailPattern3.test(email))) valid[4] = 1;\n    for (let i = 0; i < 6;i++) {\n      if (valid[i] === 0) {\n\n        addToast(`Please Write valid ${validityof[i]}`, \n          {\n            appearance: \"warning\",\n            autoDismiss: true\n          }\n        )\n        return false;\n      }\n    }\n    return true;\n    \n\n  }\n  const placeOrder = () => {\n    if (isValid()) {\n      const orderData = {\n        userID: user,\n        name,\n        address,\n        phone,\n        email,\n        note,\n        deliverOption,\n        products: cartItems,\n        status:\"PLACED\"\n      }\n      axios.post(`${URL}placeOrder`, \n        orderData).then(res => {\n          console.log(res);\n          addToast(\"Order Placed Successfully\",{\n            appearance:\"success\",\n            autoDismiss:true\n          })\n          setName(\"\");\n          setAddress(\"\");\n          setNote(\"\");\n          setPhone(\"\");\n          setEmail(\"\");\n          for (let i = 0; i < cartItems.length; i++){\n            decrementProduct({ _id: cartItems[i]._id, stock: (cartItems[i].stock - cartItems[i].quantity) });\n          }\n          removeAllFromCart();\n          history.push('/');\n        })\n      }\n    }\n  return (\n    <Fragment>\n      <MetaTags>\n        <title>Flone | Checkout</title>\n        <meta\n          name=\"description\"\n          content=\"Checkout page of flone react minimalist eCommerce template.\"\n        />\n      </MetaTags>\n      <BreadcrumbsItem to={process.env.PUBLIC_URL + \"/\"}>Home</BreadcrumbsItem>\n      <BreadcrumbsItem to={process.env.PUBLIC_URL + pathname}>\n        Checkout\n      </BreadcrumbsItem>\n      <LayoutOne SetUserLogin={SetUserLogin} headerTop=\"visible\" isLogin={isLogin}>\n        {/* breadcrumb */}\n        <Breadcrumb />\n        <div className=\"checkout-area pt-95 pb-100\">\n          <div className=\"container\">\n            {cartItems && cartItems.length >= 1 ? (\n              <div className=\"row\">\n                <div className=\"col-lg-7\">\n                  <div className=\"billing-info-wrap\">\n                    <h3>Billing Details</h3>\n                    <div className=\"row\">\n                      <div className=\"col-lg-6 col-md-6\">\n                        <div className=\"billing-info mb-20\">\n                          <label>Name</label>\n                          <input type=\"text\" onChange={(e)=>setName(e.target.value)} value={name} />\n                        </div>\n                      </div>\n                      {/* <div className=\"col-lg-6 col-md-6\">\n                        <div className=\"billing-info mb-20\">\n                          <label>Last Name</label>\n                          <input type=\"text\" />\n                        </div>\n                      </div> */}\n        \n                      <div className=\"col-lg-12\">\n                        <div className=\"billing-select mb-20\">\n                          <label>Delivery option</label>\n                          <select onChange={(e)=>setDeliverOption(e.target.value)} value={deliverOption}>\n                            <option>Pickup</option>\n                            <option>Home Delivery</option>\n                          </select>\n                        </div>\n                      </div>\n                    {deliverOption!==\"Pickup\"&&  <div className=\"col-lg-12\">\n                        <div className=\"billing-info mb-20\">\n                          <label>Address</label>\n                          <input\n                          \n                            className=\"billing-address\"\n                            placeholder=\"Address\"\n                            type=\"text\"\n                            onChange={(e)=>setAddress(e.target.value)} value={address}\n                          />\n                        </div>\n                      </div>}\n                      {/* <div className=\"col-lg-12\">\n                        <div className=\"billing-info mb-20\">\n                          <label>Town / City</label>\n                          <input type=\"text\" />\n                        </div>\n                      </div> */}\n                      {/* <div className=\"col-lg-6 col-md-6\">\n                        <div className=\"billing-info mb-20\">\n                          <label>State / County</label>\n                          <input type=\"text\" />\n                        </div>\n                      </div> */}\n                      {/* <div className=\"col-lg-6 col-md-6\">\n                        <div className=\"billing-info mb-20\">\n                          <label>Postcode / ZIP</label>\n                          <input type=\"text\" />\n                        </div>\n                      </div> */}\n                      <div className=\"col-lg-6 col-md-6\">\n                        <div className=\"billing-info mb-20\">\n                          <label>Phone</label>\n                          <input type=\"number\" onChange={(e) => { if(e.target.value.length<=10)setPhone(e.target.value);}} value={phone} />\n                        </div>\n                      </div>\n                      <div className=\"col-lg-6 col-md-6\">\n                        <div className=\"billing-info mb-20\">\n                          <label>Email Address</label>\n                          <input type=\"email\" onChange={(e) => { setEmail(e.target.value);}} value={email}   />\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"additional-info-wrap\">\n                      <h4>Additional information</h4>\n                      <div className=\"additional-info\">\n                        <label>Order notes</label>\n                        <textarea\n                          placeholder=\"Notes about your order, e.g. special notes for delivery. \"\n                          name=\"message\"\n                          onChange={(e) => { setNote(e.target.value);}} value={note} \n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"col-lg-5\">\n                  <div className=\"your-order-area\">\n                    <h3>Your order</h3>\n                    <div className=\"your-order-wrap gray-bg-4\">\n                      <div className=\"your-order-product-info\">\n                        <div className=\"your-order-top\">\n                          <ul>\n                            <li>Product</li>\n                            <li>Total</li>\n                          </ul>\n                        </div>\n                        <div className=\"your-order-middle\">\n                          <ul>\n                            {cartItems.map((cartItem, key) => {\n                              // const discountedPrice = getDiscountPrice(\n                              //   cartItem.price,\n                              //   cartItem.discount\n                              // );\n                              const discountedPrice = cartItem.discountedPrice;\n                              const finalProductPrice = (\n                                cartItem.price * currency.currencyRate\n                              ).toFixed(2);\n                              const finalDiscountedPrice = (\n                                discountedPrice * currency.currencyRate\n                              ).toFixed(2);\n\n                              discountedPrice != null\n                                ? (cartTotalPrice +=\n                                    finalDiscountedPrice * cartItem.quantity)\n                                : (cartTotalPrice +=\n                                    finalProductPrice * cartItem.quantity);\n                              return (\n                                <li key={key}>\n                                  <span className=\"order-middle-left\">\n                                    {cartItem.productName} X {cartItem.quantity}\n                                  </span>{\" \"}\n                                  <span className=\"order-price\">\n                                    {discountedPrice !== null\n                                      ? currency.currencySymbol +\n                                        (\n                                          finalDiscountedPrice *\n                                          cartItem.quantity\n                                        ).toFixed(2)\n                                      : currency.currencySymbol +\n                                        (\n                                          finalProductPrice * cartItem.quantity\n                                        ).toFixed(2)}\n                                  </span>\n                                </li>\n                              );\n                            })}\n                          </ul>\n                        </div>\n                        <div className=\"your-order-bottom\">\n                          <ul>\n                            <li className=\"your-order-shipping\">Shipping</li>\n                            <li>Free shipping</li>\n                          </ul>\n                        </div>\n                        <div className=\"your-order-total\">\n                          <ul>\n                            <li className=\"order-total\">Total</li>\n                            <li>\n                              {currency.currencySymbol +\n                                cartTotalPrice.toFixed(2)}\n                            </li>\n                          </ul>\n                        </div>\n                      </div>\n                      <div className=\"payment-method\"></div>\n                    </div>\n                    <div className=\"place-order mt-25\">\n                      <button onClick={placeOrder} className=\"btn-hover\">Place Order</button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div className=\"row\">\n                <div className=\"col-lg-12\">\n                  <div className=\"item-empty-area text-center\">\n                    <div className=\"item-empty-area__icon mb-30\">\n                      <i className=\"pe-7s-cash\"></i>\n                    </div>\n                    <div className=\"item-empty-area__text\">\n                      No items found in cart to checkout <br />{\" \"}\n                      <Link to={process.env.PUBLIC_URL + \"/\"}>\n                        Shop Now\n                      </Link>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </LayoutOne>\n    </Fragment>\n  );\n};\n\nCheckout.propTypes = {\n  cartItems: PropTypes.array,\n  currency: PropTypes.object,\n  location: PropTypes.object\n};\n\nconst mapStateToProps = state => {\n  return {\n    cartItems: state.cartData,\n    currency: state.currencyData\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    removeAllFromCart: () => {\n      dispatch(removeAllFromCart());\n    },\n    decrementProduct: (newStock) => {\n      dispatch(decrementProduct(newStock));\n    },\n  };\n};\nexport default connect(mapStateToProps,mapDispatchToProps)(Checkout);\n"],"sourceRoot":""}